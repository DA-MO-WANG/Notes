#### 避免踩坑

​		第一遍，别去追求完全确定的感觉，尤其是英文视频，大胆去体会就行，往前推进一遍
​		网络，这种东西不是独立于现实的某种游戏，就使用日常生活的存在的东西去理解它，绝对不是不接地气的高雅玩意，是一门实际的东西

#### 第一集

###### 1.0

​		没啥东西，就是一个开场白。告诉你这门课会给你带来什么。工作原理、4层模型，浏览网络背后发生的事情

###### 2.0

​	http was designed to be a document-centric way for programs to communicate

​	讲了三个例子：掠过、bt技术、skype
​	bt : torrent文件，找到tracker，和列表中的节点建立连接
​	skip: 反向代理--单向访问，你可以通过这个单向访问网络，但其他人不能通过这个访问你、rendezvous 、 relay  -- relay负责和nat 交互

###### 3.0

​		很多不同的应用虽然发着不同的数据：但是在收发数据的方式上出奇的相似
​		为什么要给网络分层，是为了让各个应用重复使用，而不是从头创建

​		链路层，负责致命packet从哪里来到哪里去

字幕：

​		在上一节中，我们了解到了BT、skype、万维网这些应用如何使用一种双向值得依赖的比特流来在网络上沟通的。
为了给我们的应用，创造可靠的交互模型，需要做很多工作
尽管我们使用不同的应用，发送各自不同的数据，但是在收发数据方式方面，竟然是出奇的相似。
比如，应用在收发数据时，都不需要负责关心，数据在网络中的路径和路由。
所有的应用都想要确信所有的数据最终都会被正确发送。即使伴随数据丢失打断，也会被自动重连。
早期网络先驱创造了四层因特网模型来描述构成网络的操作层次，这样做应用就可以复用相同的基础设施，而不必从头再创造他们
层次是一个特别重要，而且频繁使用的概念，我们会在下面的课程中反复提到
甚至会有一个课程专门来介绍这个概念
让我们来看看这四层模型中每一层都做了什么
了解四层协议，有利于终端中的应用进行更可靠的交流
为了解释它们怎么工作的，我们可以从最底层开始
我们可以看到每一层都有各自的职责，每一层都都对上提供了一种服务，借助这种服务我们可以实现可靠的交流
让我们从链路层开始
这个块网络由终端、链路、路由组成
数据，在每一个连接上，对等轮流来发送.
数据是以分包的形式来发送
一个分包，除了包含我们要发送的核心数据，还包括头部。这个头部包含一些辅助信息。比如这个分包要发向哪里，还有来自哪里

网络层把数据报交给下面的链路层，告诉他去发送这个数据到第一个连接。换句话说，链路层对网络层提供一种服务。也就是链路层会说，如果你给我一个数据报，我会为你通过一个连接来传输它。连接的另一端是一个路由器。路由器的链路层接收这个数据报，把它往上传，传给网络层。路由器网络层会检验这个数据报的目的地地址，负责朝向它最终的目的地，为它选择一个路由。它通过再一次发回到链路层，然后携带它，为了下一个连接，如此反复，直到它到达目的地的网络层。我们可以看到，网络层 根本不用关注链路层是怎么连接的。事实上，不同的链路层以不同的方式来运作。比如wifi和以太网就是非常不同的。这种隔离，让网络层和链路层各自聚焦他们自己的工作，而不用担忧其他层是怎么工作的。这意味着一个简单的网络层拥有统一的方式来对话不同的链路层，通过简单发送数据报的方式。这种隔离概念，是建立在每一次模块化，还有统一的定义好指向下层的API。在网络中，网络层是特殊的，当我们发送分包到网络中时，我们必须使用因特网协议，也叫ip。是这个东西，主掌了网络。在下面的视频中，我们可以了解到更多的细节。但是现在我们只需要知道关于ip的一些基本的东西。ip为发送者发送分包到另一端做出了很多工作。但是他们没有承诺做成什么效果。IP分包可能遗失，可能被无序发送，甚至可能被打断。这些都是没有保证的。这些都可能意外的方式发生。当分包不能完好传递时，网络还能怎么工作？如果一个应用想要保证数据会最终到达，不带任何意外中断，那它就需要在ip上层的再造一个协议，这也是运输层的工作。运输层最常见的就是TCP（运输控制协议）。TCP可以确保数据被网络上一端的应用正确发送，以正确的顺序，发送到网络傻上另一端。如果网络层丢失一些数据报，t c p会多次重发，如果网络层以无序的方式发送他们，也许分包以不同的路径到达目的地。t c p会让数据回归到正确的顺序。后面的视频会了解到t c p如何工作的细节。现在需要记住的就是t c p提供给应用一直保证数据可靠传输的服务。这种服务运行在网络层服务之上。而网络层服务提供的是一种不可靠的服务。你可以想象到，网络客户端，邮件客户端确实的认为t c p非常有用。他们不必在应用程序里自己实现这种机制。开发者就可以基于t cp正确地发送数据。复用是层次的另一个巨大的优势。但是并非所有的应用场景都要求数据正确传递。比如视频相关的应用就是在分包中发送一种视频片段。在这里没有必要等待分包重发多次，而只是传递。还有一些应用根本不需要t c p服务。如果一个应用，不需要可靠的传递，它只是使用简化多的ud p（用户数据报协议）。ud p仅仅封装应用数据，把它交给网络层来传递到另一端。换句话说，一个应用，在运输层有至少两种选择。当然也还有其他选择，但这两种是最主流的。最后，我们到达4层协议中最顶层的协议--应用层。尽管每一个应用，通过应用层定义好的api来使用运输层的t c p/udp服务。正如我们在课程中看到，应用主要还是想要一个双向的可靠的字节流服务，在两个端点之间。他们可以传递他们想要的任何数据，只要他们拥有定义好的要传输数据的语义和语法。当一个网络客户端向一个服务端请求一个页面，

===》链路层会去和另一端的链路层建立连接，网络层发送数据报给链路层，这里的服务是基于ip协议的，但ip协议只管发送，至于数据各种不良情况-丢失、中断、无序，她解决不了，然后这些问题，交给上面的运输层 的服务来解决。这里有可考的t c p，t c p可以做到丢失重发，无序变有序，但这个重发不一定是所有业务场景都需要，然后就有了简化的ud p。然后应用层调用api来把应用数据发给运输层。

we b客户端发送一个ge t请求，这是http协议的要求。ge t请求伴随被请求的页面的url，作为字符串一起被发送。根据应用层规定，ge t请求被直接发送到网络上的另一端：服务器应用。应用层不需要知道是怎么发送的，被发送了多少次。客户端应用层把ge t请求发送到t c p层，这一层提供了可靠的传输服务，然后接着使用网络层提供的服务，接着使用链路层提供的服务。我们也可以说，每一层看起来像是和对等的同层进行交互，而不是视作下面的层如何从上层获得数据。把所有的东西放在一起看，网络工程师发现，只要把构建网络的所有功能快安排好，是很有利的。BT、skype这些软件都是应用层和目的地对等 的应用层进行对话。（底层封装好的一种错觉）
		应用层要传送数据到另一个应用的应用层，就需要把数据传送给下面的运输层
		运输层药传送数据到对应的运输层，就需要把数据传送给下面的网络层
		以此类推，一直到链路层。链路层的任务就是把数据分成分包，每一个都正确的送到路径中的相邻节点的链路层，然后从底到顶，从顶到底，一直到应用所在节点的链路层，然后往上传递到应用层。
		应用层：使用明确的语义，在两个应用之间，进行双向可靠的比特流服务
		运输层：保证数据有序正确的在端到端之间传递，控制拥塞
		网络层：尽最大努力发送端到端数据报，没有任何保证，必须使用ip协议
		链路层：通过单一连接在端到端之间、路由之间发送数据
		首先，ip被看作网络中的细腰，这是因为，在使用网络中，ip是躲不开的，没有其他选择。但是我们在链路层有很多选择，ip运行在多种不同的链路层之上，比如以太网、wifi、dsl、3g。在不够可靠的ip协议之上，我们可以在运输层的多种协议上选择，比如t c p\udp\rtp，当然在应用层也有更多的选择：比如http\smtp\ssh\ftp
		还有一件事你应该知道，80年代标准组织，iso发明了七层协议来表示网络的各种类型。我们没有在这上面花费任何精力，因为它被4层协议替代了。七层协议模型 定义的了一些层次，是被整合到4层当中。比如，链路层被分割成定义规定格式，还有规定电缆电压、物理连接尺寸的物理层。网络层是相同的。运输层和应用层，都在七层中对应2层。osi唯一一个还算有用的遗产是计数系统。人们称呼上，还会用这种计数。 