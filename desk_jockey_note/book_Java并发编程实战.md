###### 导读

* 第一部分：并发基础理论
  * 线程安全性、状态对象
  * 如何构造线程安全类，并组合更大的线程安全类
  * 库基础并发模块
* 第二部分：结构化程序
  * 并行语义分解、逻辑任务映射
  * 任务取消、关闭
  * 线程池高级功能
* 第三部分：性能与测试
  * 并发性能调优
    * 如何避免活跃性问题
    * 如何提高并发代码的性能实用技术
* 第四部分：进阶主题
  * 显式锁、原子变量、非阻塞算法、如何开发自定义的同步工具类

##1. 并发的背景知识

* 并发常被拿出来与串行做比较来谈
* 线程是并发的具体实现方式，可以用来简化异步代码的实现；可以用来发挥多处理器的计算能力



#### 1.2.2 建模

把任务分解，分解成一组工作流，有些工作流是同步的，有些是异步的

阻塞IO和非阻塞IO的区别：当发起io请求时，数据没有大佬，线程只能等待，这叫阻塞；非阻塞就是线程不用等待，可以去处理其他请求

#### 1.3.1 线程带来的问题

* 安全问题：不能预料的情况会发生
  * 有些代码在单线程下能正确工作，但在多线程下就出现其他问题。因为多个线程是交替执行的，如果执行时机不对，就会出现意料之外的值：多次多个线程对同一过程得到的值情况不唯一
* 活跃性问题：正确的事情不能发生
  * 无限等待、循环，导致后面的代码无法执行
* 性能问题：正确的事情不能尽快发生



##2. 线程安全性

1. 线程安全的核心是对状态访问操作进行管理：Shared共享状态、Mutable可变状态

* 状态就是数据
* 共享是过程视角：多个线程共同访问
* 可变是结果视角，多个线程访问后，造成变量值在一个生命周期内发生变化

2. 对线程安全有帮助作用的设计原则
   * 封装性，代码的封装性越好，越容易实现线程安全性
   * 优化有前置条件：
     * 正确的编程原则之一：先保证代码的运行的正确性，然后再考虑提高速度
     * 有性能测试结果和应用需求要求再优化
     * 测量结果表明在实际环境中确实能带来性能提升
   * 无状态性：不保存数据
   * 

